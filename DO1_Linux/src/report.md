## Part 1. Установка ОС

- Установка Ubuntu 20.04 Server LTS без графического интерфейса.
- Вывод команды: `cat /etc/issue`:

    ![](img/Part_1.png)

## Part 2. Создание пользователя

- Создание пользователя, отличного от созданного при установке. 
- Пользователь должен быть добавлен в группу adm.
- Создание группы: `sudo groupadd adm`
- Создание пользователя и добавление в группу adm: `sudo useradd -g adm adm`:

  ![](img/Part_2_01.png)

- Вывод команды: `cat /etc/passwd`:

  ![](img/Part_2_02.png)

## Part 3. Настройка сети ОС

- Название машины вида user-1.
- Для установки на постоянной основе: `sudo hostnamectl set-hostname user-1`: 

  ![](img/Part_3_01.png)

- Установка временной зоны, соответствующая текущему местоположению.
- Для установки временной зоны: `sudo datetimectl set-timezone Europe/Moscow`

  ![](img/Part_3_02.png)

- Вывод названия сетевых интерфейсов с помощью консольной команды: `ip l`
  
  ![](img/Part_3_03.png)

- >Интерфейс lo - это интерфейс обратной петли, имеющей IP-адрес 127.0.0.1, который позволяет компьютеру обращаться к самому себе.

- Получение ip адреса устройства, от DHCP-сервера.

  ![](img/Part_3_04.png)

- >Расшифровка DHCP - это сетевой протокол, который автоматически назначает IP-адреса и другие параметры конфигурации сетевым устройствам в сети. Это упрощает процесс настройки сети, исключая необходимость вручную вводить IP-адреса для каждого устройства.

- Внешний ip-адрес шлюза (ip): `curl ifconfig.co`
- Внутренний IP-адрес шлюза, он же ip-адрес по умолчанию (gw): `ip route show default`

  ![](img/Part_3_05.png)

- Статичные (заданные вручную, а не полученные от DHCP-сервера) настройки ip, gw, dns (используются публичный DNS-серверы).
- Конфигурационный файл сети: `sudo nano /etc/netplan/00-installer-config.yaml`

  ![](img/Part_3_06.png)

- Сохранение конфигурации: `sudo netplan apply`
- Перезапуск: `sudo reboot`
- Проверка сохранения статичных сетевых настроек (ip, gw, dns).

  ![](img/Part_3_7.png)

- Пинг удаленных хостов 1.1.1.1 и ya.ru

  ![](img/Part_3_08.png)

## Part 4. Обновление ОС

- Обновление системных пакетов до последней на момент выполнения задания версии: `sudo apt update` `sudo apt upgrade`
- После обновления системных пакетов, вывод команды обновления повторно:  `sudo apt upgrade`

  ![](img/Part_4.png)

## Part 5. Использование команды sudo

- Добавление в группу sudo: `sudo usermod -aG sudo adm`
- Проверка групп пользователя: `groups adm`

  ![](img/Part_5_01.png)

- Замена hostname ОС от имени пользователя: `sudo hostnamectl set-hostname belbysha`

  ![](img/Part_5_02.png)

- > Назначение команды sudo: предоставляет возможность пользователям выполнять команды от имени root'а либо других пользователей.

## Part 6. Установка и настройка службы времени

- Настройка службы автоматической синхронизации времени: `sudo timedatectl set-ntp true`

- Вывод время часового пояса, в котором ты сейчас находишься: `timedatectl show`

  ![](img/Part_6.png)

## Part 7. Установка и использование текстовых редакторов

- Установка текстовых редакторов VIM (+ любые два по желанию NANO, MCEDIT, JOE и т. д.): `sudo apt install vim nano mcedit`

- Создание файла test_X.txt, где X — название редактора, в котором создан файл. Напиши в нём свой никнейм, закрой файл с сохранением изменений.
- vim: Вход в режим редактирования `i`, для выхода `ESC`
- Сохранение `:w`, выход: `:q`

  ![](img/Part_7_01.png)

- nano: Сохранение `CTRL + S`, Выход `CTRL + X`

  ![](img/Part_7_11.png)

- mcedit: Сохрание `F2` Выход `F10`

  ![](img/Part_7_21.png)

- Открытие файла на редактирование, замена никнейма на строку «21 School 21», закрой файл без сохранения изменений.

- vim: Вход в режим редактирования `i`, для выхода `ESC`
- Выход: `:q!`

  ![](img/Part_7_02.png)

- nano: Выход `CTRL + X`

  ![](img/Part_7_12.png)

- mcedit: Выход `F10`

  ![](img/Part_7_22.png)

- Редактирование файла ещё раз (по аналогии с предыдущим пунктом), а затем освой функции поиска по содержимому файла (слово) и замены слова на любое другое.

- vim: Базовый поиск `/`, Искать целиком `/\<word\>`
- Замена текста: `:s/<search_phrase>/<replace_phrase>/`

  ![](img/Part_7_03.png)
  ![](img/Part_7_04.png)

- nano: Поиск `CTRL + W`
- Замена текста: `CTRL + \`

  ![](img/Part_7_13.png)
  ![](img/Part_7_14.png)

- mcedit: Поиск `F7`
- Замена текста: `F4`

  ![](img/Part_7_23.png)
  ![](img/Part_7_24.png)

## Part 8. Установка и базовая настройка сервиса SSHD

- Установка службы SSHd: `sudo apt install openssh-server`
- Включение автозапуска: `sudo systemctl enable ssh`
- Выключение автозапуска: `sudo systemctl disable ssh`
- Состояние SSHd службы: `sudo systemctl status ssh`

  ![](img/Part_8_01.png)

- Перенастройка службы SSHd на порт 2022: `sudo nano /etc/ssh/sshd_config`

  ![](img/Part_8_02.png)

- Перезапуск и просмотр SSHd: `sudo systemctl restart ssh` `sudo systemctl status ssh`'

  ![](img/Part_8_03.png)

- Наличие процесса sshd: `ps -aux | grep sshd`

  ![](img/Part_8_04.png)

- > ps - Команда для отображения информации о процессах.
<br> a: Показать процессы всех пользователей. 
<br> u: Показать дополнительную информацию о пользователе и ресурсах.
<br> x: Показать процессы без привязки к терминалу. (не имеют интерактивного интерфейса)

- Перезагрузка системы: `sudo reboot`

- Вывод команды: `netstat -tan` 

  ![](img/Part_8_05.png)

- >  -t: Показывает только TCP-соединения.
<br> -a: Показывает все соединения и порты, как активные, так и слушающие.
<br> -n: Показывает IP-адреса и номера портов в числовом формате, без разрешения имен хостов и сервисов.

- > Proto: Тип протокола (например, tcp/upd).
<br> Recv-Q: Количество байт, ожидающих получения в очереди приема.
<br> Send-Q: Количество байт, ожидающих отправки в очереди отправки.
<br> Local Address: Локальный IP-адрес и порт, на котором процесс слушает или с которого установлено соединение.
<br> Foreign Address: Удаленный IP-адрес и порт, с которыми установлено соединение (или *, если процесс только слушает).
<br> State: Состояние соединения (например, LISTEN, ESTABLISHED, CLOSE_WAIT и т.д.).

- >  0.0.0.0: Это специальный IP-адрес, означающий, что процесс слушает на всех сетевых интерфейсах машины. То есть, соединения могут поступать как с локального интерфейса, так и с любого другого подключенного интерфейса.

## Part 9. Установка и использование утилит top, htop

- Вывод команды: `top`

  ![](img/Part_9_01.png)

- uptime: `1 min`
- Количество авторизованных пользователей: `1 user`
- Средняя загрузка системы: `0.18`
- Общее количество процессов: `107 `
- Загрузка cpu: `0.3%`
- Загрузка памяти: `139,9` 
- pid процесса, занимающего больше всего памяти: `1 - systemd`
- pid процесса, занимающего больше всего процессорного времени: `1 - systemd`

- Вывод команды `htop`:
- Отсортированному по PERCENT_CPU (по умолчанию)

  ![](img/Part_9_02.png)

- Отсортированному по PID 

  ![](img/Part_9_03.png)

- Отсортированному по PERCENT_MEM

  ![](img/Part_9_04.png)

- Отсортированному по TIME 

  ![](img/Part_9_05.png)

- Отфильтрованному для процесса sshd

  ![](img/Part_9_06.png)

- С процессом syslog, найденным, используя поиск

  ![](img/Part_9_07.png)

- С добавленным выводом hostname, clock и uptime

  ![](img/Part_9_08.png)

## Part 10. Использование утилиты fdisk

- Запуск команды `sudo fdisk -l`.

  ![](img/Part_10.png)

- Название жесткого диска: `VBOX HARDDISK`
- Размер и количество секторов: `25GiB, 52428800 sectors`
- Размер swap: `2GiB` | `free -h` `swapon --show`

## Part 11. Использование утилиты df

- Команда `df /`.

  ![](img/Part_11_01.png)

- Размер раздела: `11758760`
- Размер занятого пространства: `4924428`
- Размер свободного пространства: `6215224`
- Процент использования: `45`%
- Единица измерения: `Kib`

-Команда `df -Th /`.

  ![](img/Part_11_02.png)

- Размер раздела: `12G`
- Размер занятого пространства: `4.7G`
- Размер свободного пространства: `6.0G`
- Процент использования: `45%`
- Единица измерения: `Gib`

- > Тип файловой системы для раздела: ext4 - Файловая система с журналированием для Linux, разработанная как преемница ext3.

## Part 12. Использование утилиты du

- Команда `sudo du -s` `sudo du -sh`.
- Вывод размер папок /home, /var, /var/log (в байтах -s, в человекочитаемом виде -sh).

  ![](img/Part_12_01.png)

- Команда `sudo du /var/log/*`.
- Вывод размера всего содержимого в /var/log (не общее, а каждого вложенного элемента, используя *).

  ![](img/Part_12_02.png)

## Part 13. Установка и использование утилиты ncdu

- Установка утилиты ncdu: `sudo apt install ncdu`.
- Вывод размера папок /home, /var, /var/log.

  ![](img/Part_13_01.png)

  ![](img/Part_13_02.png)

  ![](img/Part_13_03.png)

## Part 14. Работа с системными журналами

- Открытие для просмотра:
- /var/log/dmesg

  ![](img/Part_14_01.png)

- /var/log/syslog

  ![](img/Part_14_02.png)

- /var/log/auth.log

  ![](img/Part_14_03.png)

- Время последней успешной авторизации: `Aug 26 16:23`
- Имя пользователя: `user`
- Метод входа в систему: `uid=0`

- Перезапуск службы SSHd: `sudo systemctl restart ssh`
- Сообщение о рестарте службы:

  ![](img/Part_14_04.png)

## Part 15. Использование планировщика заданий CRON

- Используя планировщик заданий, запуск команды uptime через каждые 2 минуты.
- Добавление задания `crontab -e`

  ![](img/Part_15_01.png)

- Поиск в системных журналах строчки (минимум две в заданном временном диапазоне) о выполнении. 

  ![](img/Part_15_02.png)

- Вывод на экран список текущих заданий для CRON `crontab -l`.

  ![](img/Part_15_03.png)

- Удаление всех заданий из планировщика заданий `crontab -r`.

  ![](img/Part_15_04.png)
